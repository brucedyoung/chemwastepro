(dp1
S'output'
p2
S"<type 'exceptions.KeyError'> 'disposalcode'"
p3
sS'layer'
p4
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/controllers/inventory.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# try something like\nfrom gluon.custom_import import track_changes; track_changes(True)\nfrom cwp_htmlhelpers import cwpeditlink\nimport cwp_functions\n\n\n#must use this for list fields to show rendered value, instead of record ids\ndef render_docs(ids,row):\n      doc=""\n      for id in ids:\n         doc = doc+db.hazard(id).hazardabbrev+" "#db.wbdocuments(id)\n      return doc\n\ndef index():\n    PageHeader = ""\n    #grid = SQLFORM.grid(db.item)\n\n    return dict(PageHeader=PageHeader,grid=grid)\nimport json\ndef item():\n    PageHeader = "Item"\n    addbutton = """<a href ="""+URL("inventory","itemedit")+""" class="btn btn-block btn-success">Add </a>"""\n    editlink = """<a href ="""+URL("inventory","itemedit")+"""/%s class="fa fa-fw fa-edit"></a>"""\n    #datatables\n    #http://www.pyguy.com/web2py/web2py-tutorial-using-the-datatable-jquery-grid-plugin-with-web2py/\n    #Cannot use this:\n    #item = json.dumps(db(db.item).select().as_list())\n    #Because we need the represented value, like "chemical Name"\n    #So we do this:\n    rows = db(db.item.id>0).select()\n    \n \n    #cannot use render, because need r.name as number to calculate disposal code by function, so use direct references for remainder of fields that need represent\n    #added test if related record exists, example: if r.container else "", so no error if there is no related record\n    item = json.dumps([dict(id=r.id,name=r.name.chemname if r.name else "",disposalcode=cwp_functions.returndisposalcode(r.name),pounds=r.pounds,container=r.container.contnum if r.container else "",shelf=r.shelf.shelfcode if r.shelf else "",editlink=editlink  % r.id) for r in rows])# do not rows.render()\n    return dict(PageHeader=PageHeader,addbutton=XML(addbutton),results=XML(item))\n\n\ndef itemedit():\n    PageHeader = "Item"\n    chemname=disposalcode=""\n    chemid = 0\n    cancelbutton = XML( """<a href ="""+URL("inventory","item")+""" class="btn btn-block btn-warning">Cancel </a>""")\n    db.item.container.represent = lambda container, row: container+"hey"\n    fields=[\'name\', \'quantity\', \'receptacle\', \'condition_\', \'capacity\', \'amount\', \'units\', \'components\', \'comments\', \'container\', \'shelf\']\n    if (request.args(0)): #UPDATE RECORD or INSERT RECORD\n        record = db.item(request.args(0)) or redirect(URL(\'error\'))\n        \n        disposalcode=cwp_functions.returndisposalcode(record.name) #get disposalcode string\n        #disposalcode = record.disposalcode #<<<<TODO Add onchange event\n        chemname = record.name.chemname\n        chemid = record.name\n        item_id = record.id\n        form = SQLFORM(db.item, record,fields=fields)\n\n    #FIX if there is no shelf\n    # labeltext = "Hazardous Waste    Accum. Date: "+"1-1-1907"+"\\n"+"Item: "+str(record.id)+"       "+"Shelf:"+str(record.shelf.shelfcode)+"\\n"+str(record.name.chemname)+"\\n"+str(record.disposalcode)#Dymo Label\n        labeltext =\'\'\n    else: # ADD RECORD\n        form = SQLFORM(db.item,fields=fields)\n        disposalcode  = \'\'\n        labeltext = \'\'\n        item_id = 0\n    form.add_button(\'Back\', URL(\'other_page\'))\n    #disposalcode = record.disposalcode #<<<<TODO Add onchange event\n    #Eplicitly list fields. When using {{=form.custom.widget.Ireceptacle}}, it will only show and edit listed fields\n    #By restricting edit fields, you avoid errors\n    #form = SQLFORM(db.item, record,fields=fields)\n\n    if form.process().accepted:\n        response.flash = \'form accepted\'\n        try:\n            record.update_record(**dict(form.vars))#record is updated\n            redirect(URL(\'item\'))\n        except NameError:\n            response.flash = \'record added\'\n            redirect(URL(\'item\'))\n    elif form.errors: #name is None\n        redirect(URL(\'item\'))\n    \n    #using web2py built-in helper "A" \n    topactionbutton1 = A(DIV(\' Print Label\', _class=\'fa fa-print\'), _class=\'btn btn-block btn-default btn-xs\', _id="printButton", target=\'target1\')\n    #ID,Chemname,DisposalCode,AccumulationStartDate,Shelf,PrimaryHazard\n    #shelveAnchor is used for Javascript on page to change the chemindex id, to calculate new disposal code\n    topactionbutton2 = A(DIV(\' Shelve Item\', _class=\'fa fa-sign-in\'), _id=\'shelveAnchor\', _class=\'btn btn-block btn-default btn-xs\', component=URL(\'shelve\'+\'?item_id=\'+str(item_id)+\'&item_chemid=\'+str(chemid)), target=\'target1\')\n    \n    return dict(PageHeader=PageHeader,cancelbutton=cancelbutton,form=form,disposalcode=disposalcode, labeltext=labeltext,chemname=chemname,chemid=chemid,item_id=item_id,topactionbutton1=topactionbutton1,topactionbutton2=topactionbutton2)\n\ndef container():\n    PageHeader = "Container"\n    rows = db(db.container.id>0).select()\n    #icon="""<a href="""+URL(\'inventory\',\'containeredit\')+"""/%s><div class="col-md-3 col-sm-4"><i class="fa fa-fw fa-edit"></i></div></a>"""\n    addbutton = """<a href ="""+URL("inventory","containeredit")+""" class="btn btn-block btn-success">Add </a>"""\n    editlink = """<a href ="""+URL("inventory","containeredit")+"""/%s class="fa fa-fw fa-edit"></a>"""\n    container = json.dumps([dict(id=r.id,contnum=r.contnum,psn=r.psn,opendate=str(r.opendate),closedate=str(r.closedate),disposalcode=r.disposalcode,shipment=r.shipment,editlink=editlink  % r.id) for r in rows.render()])#adding render to use represented view of fields\n    #form = SQLFORM(db.shipment,editable=True,)\n\n                 \n          \n    return dict(PageHeader=PageHeader,addbutton=XML(addbutton),results=XML(container))\n\ndef containeredit():\n    cancelbutton = XML( """<a href ="""+URL("inventory","container")+""" class="btn btn-block btn-warning">Cancel </a>""")\n    fields=[\'psn\', \'opendate\', \'closedate\', \'chemweight\', \'grossweight\', \'disposalcode\', \'profile\', \'tsdf\', \'containertype\', \'containersize\', \'containerstyle\',\'containervolume\',\'containerconstruction\',\'closedby\',\'shipment\',\'generator\',\'statewastecode\',\'fedwastecode\',\'accumulationstartdate\',\'contentscomposition\',\'cstate\', \'hazardousproperties\',\'rq\',\'unna\',\'descriptor\',\'technicalname\',\'hazdivision\',\'pggroup\',\'psndescriptor\',\'contnum\']\n    if (request.args(0)): #UPDATE RECORD\n        record = db.container(request.args(0)) or redirect(URL(\'error\'))\n        form = SQLFORM(db.container, record,fields=fields)\n    else: #or INSERT RECORD\n        form = SQLFORM(db.container,fields=fields)\n    form.add_button(\'Back\', URL(\'other_page\'))\n    #process form\n    if form.process().accepted:\n       response.flash = \'form accepted\'\n       try:\n            record.update_record(**dict(form.vars))#record is updated\n            redirect(URL(\'container\'))\n       except NameError:\n            response.flash = \'record added\'\n            redirect(URL(\'container\'))\n    elif form.errors:\n       redirect(URL(form.errors))\n       response.flash = \'form has errors\'\n    return dict(form=form,cancelbutton=cancelbutton,)\n\ndef shipment():\n    PageHeader = "Shipment"\n    rows = db(db.shipment.id>0).select()\n    addbutton = """<a href ="""+URL("inventory","shipmentedit")+""" class="btn btn-block btn-success">Add </a>"""\n    icon="""<a href="""+URL(\'inventory\',\'shipmentedit\')+"""/%s><div class="col-md-3 col-sm-4"><i class="fa fa-fw fa-edit"></i></div></a>"""\n    shipment = json.dumps([dict(id=r.id,manifest=r.manifest,editlink=icon  % r.id) for r in rows.render()])#adding render to use represented view of fields\n    #form = SQLFORM(db.shipment,editable=True,)\n\n    return dict(PageHeader=PageHeader,results=XML(shipment), addbutton=XML(addbutton))\ndef shipmentedit():\n    fields=[\'manifest\',]\n    if (request.args(0)):\n        record = db.shipment(request.args(0)) or redirect(URL(\'error\'))\n        form = SQLFORM(db.shipment, record,fields=fields)\n        #redirect(URL(\'container\'))\n    else:\n        form = SQLFORM(db.shipment,fields=fields)\n        disposalcode  = \'\'\n        #redirect(URL(\'container\'))\n    form.add_button(\'Back\', URL(\'other_page\'))\n\n    if form.process().accepted:\n       response.flash = \'form accepted\'\n       try:\n            record.update_record(**dict(form.vars))#record is updated\n            redirect(URL(\'shipment\'))\n       except NameError:\n            response.flash = \'record added\'\n            redirect(URL(\'shipment\'))\n    elif form.errors:\n       redirect(URL(form.errors))\n       response.flash = \'form has errors\'\n\n    return dict(PageHeader=PageHeader,cancelbutton=cancelbutton,form=form)\n\ndef chemindex():\n    PageHeader = "Chemical Index"\n    icon="""<a href="""+URL(\'inventory\',\'chemindexedit\')+"""/%s><div class="col-md-3 col-sm-4"><i class="fa fa-fw fa-edit"></i></div></a>"""\n    addbutton = """<a href ="""+URL("inventory","chemindexedit")+""" class="btn btn-block btn-success">Add </a>"""\n    #db.chemindex.hazard.represent = render_docs # list fields to show rendered value, instead of record ids\n    #Get chemical hazard list from intermediate table\n    #chemassoc_rows = db(db.chemindex_hazard_association.chemindex_id == record.id).select(orderby=db.chemindex_hazard_association.hazard_order)\n    \n    #Normalized hazard list\n     ###SO SLOW!!!!\n    #Calculating disposalcode and hazard takes too long\n    \n    rows = db(db.chemindex.id>0).select(db.chemindex.id,db.chemindex.chemname,db.chemindex.group_,db.chemindex.state,db.chemindex.tsdf,db.chemindex.treatment,db.chemindex.hazwastecodes)\n    \n    chemindex = json.dumps([dict(id=r.id,chemname=r.chemname,group=r.group_,state=r.state,disposalcode=r.id,tsdf=r.tsdf,treatment=r.treatment,hazard=r.id,hazwastecodes=r.hazwastecodes,editlink=icon  % r.id) for r in rows.render()])#adding render to use\n#cwp_functions.returndisposalcode(r.id)\n\n    #represented view of fields\n    return dict(PageHeader=PageHeader,results=XML(chemindex),addbutton=XML(addbutton))\n\n\ndef chemindexedit():\n    hprint=\'\'\n    PageHeader = "Chemical Index"\n    hazardlist =\'\' #hazard list is the potential hazads from hazard table\n    chemhazardlist= \'\' #chemhazardlist is the actual hazards associated with the chemical reflected in the chemindex_hazard_association table\n    \n    \n    # (1) Get available hazards - make ordered list for jquery sortable to pull from\n    hazards = [(r.id, r.hazardname) for r in db(db.hazard).select(orderby=db.hazard.hazard_order)]\n    hazardid, hazardname = zip(*hazards)#seperate into two lists\n    #Create HTML unordered list\n    for idx, r in enumerate(hazardid):\n        hazardlist += str(LI(hazardname[idx], _class=\'ui-state-default ui-sortable-handle\', _id=hazardid[idx]))\n    fields=[\'chemname\', \'casnum\', \'group_\', \'state\', \'disposalcode\', \'packtype\', \'treatment\',\'components\', \'hazwastecodes\', \'comments\']#\n    if (request.args(0)): #UPDATE RECORD or INSERT RECORD\n        record = db.chemindex(request.args(0)) or redirect(URL(\'error\'))\n        #disposalcode = record.Idisposalcode #<<<<TODO Add onchange event\n\n        #Add a hidden field hazard_list to return the result of the Chemical Hazard unordered list\n        #Pass value = blank\n        #If hazard_list gets value, it means the sortable list as changed, and associations should be updated\n        form = SQLFORM(db.chemindex, record,fields=fields,hidden=dict(hazard_list=\'\'))\n        #NORMALIZED\n        rows = db(db.chemindex_hazard_association.chemindex_id == record.id).select(orderby=db.chemindex_hazard_association.hazard_order)\n        for row in rows:\n            chemhazardlist += str(LI(row.hazard_id.hazardname, _class=\'ui-state-default ui-sortable-handle\', _id=row.hazard_id))\n            \n\n\n            \n        #NOT USED!!!\n        #hlist=str(record.hazard)\n        \n        #for number in record.hazard: #build hazard list for disposal code\n        #    #row = db(db.chemindex.id == int(request.vars.name)).select().first()\n        #    row = db(db.hazard.id == int(number)).select().first()\n        #    hprint=hprint+row.hazardabbrev\n        #hazrows = db.hazard.id.contains(hlist, all=True)\n        #recid = row.group[:2].upper()+\'-\'+row.state.upper()+hprint\n\n\n    else:#ADD NEW RECORD\n        form = SQLFORM(db.chemindex,fields=fields,hidden=dict(hazard_list=\'\'))\n        disposalcode  = \'\'\n    form.add_button(\'Back\', URL(\'other_page\'))\n    cancelbutton = XML( """<a href ="""+URL("inventory","container")+""" class="btn btn-block btn-warning">Cancel </a>""")\n\n    if form.process().accepted:\n       response.flash = \'form accepted\'\n       try:\n            #update hazard list\n            ohazard_list = []\n            hazard_list=(request.vars.hazard_list)\n            if(hazard_list!=\'\'): #the chemical hazard sortable UL was modified\n                ohazard_list=hazard_list.split(",") # create ordered list\n                db(db.chemindex_hazard_association.chemindex_id==form.vars.id).delete() #Delete all associations for chemindexid\n                for index, hazardid in enumerate(ohazard_list):\n                    db.chemindex_hazard_association.insert(chemindex_id=form.vars.id,hazard_id=hazardid,hazard_order=index)    \n            record.update_record(**dict(form.vars))#record is updated\n            redirect(URL(\'chemindex\')+str(ohazard_list))\n            \n         \n       except NameError:\n         \n        \n            response.flash = \'record added\'\n            redirect(URL(\'chemindex\'))\n    elif form.errors: #problems with required fields\n       redirect(URL(form.errors))\n       response.flash = \'form has errors\'\n\n\n    \n    return dict(PageHeader=PageHeader,cancelbutton=cancelbutton,form=form,hprint=hprint,chemhazardlist=XML(chemhazardlist),hazardlist=XML(hazardlist))\n\n\ndef shelve():\n    #use this to control the dropdown on the item edit page.\n    #That way, the user has to save the record for changes to take place.\n    #otherwise, cancels\n    responsestr = "no"\n    chemhazardlistc=""\n    item_id=request.vars.item_id\n    item_chemid=request.vars.item_chemid\n    if ((item_id > "") & (item_chemid > "")):\n        chemindex_row = db(db.chemindex.id == int(item_chemid)).select().first() #should be only one\n        disposalcode=cwp_functions.returndisposalcode(chemindex_row.id) #get disposalcode string\n        row = db(db.shelf.disposalcode == disposalcode).select().first()#get the first one. Could reduce by creation date or shelf number\n    if row is None:\n        #user alert of change\n        responsestr = "No shelf found"\n        #javascript making change\n        response.js = "var element = document.getElementById(\'item_shelf\');element.value = 0;"\n    else:\n        #user alert of change\n        responsestr = "Item shelved"\n        #javascript making change\n        response.js =  ("var element = document.getElementById(\'item_shelf\');element.value = %s;" % row.id)\n    return (responsestr)\n\nresponse._vars=response._caller(chemindexedit)\n'
p7
sS'snapshot'
p8
(dp9
S'exception'
p10
(dp11
S'__hash__'
p12
S"<method-wrapper '__hash__' of exceptions.KeyError object>"
p13
sS'__setattr__'
p14
S"<method-wrapper '__setattr__' of exceptions.KeyError object>"
p15
sS'__reduce_ex__'
p16
S'<built-in method __reduce_ex__ of exceptions.KeyError object>'
p17
sS'__getslice__'
p18
S"<method-wrapper '__getslice__' of exceptions.KeyError object>"
p19
sS'__getitem__'
p20
S"<method-wrapper '__getitem__' of exceptions.KeyError object>"
p21
sS'__setstate__'
p22
S'<built-in method __setstate__ of exceptions.KeyError object>'
p23
sS'args'
p24
S"('disposalcode',)"
p25
sS'__reduce__'
p26
S'<built-in method __reduce__ of exceptions.KeyError object>'
p27
sS'__str__'
p28
S"<method-wrapper '__str__' of exceptions.KeyError object>"
p29
sS'__format__'
p30
S'<built-in method __format__ of exceptions.KeyError object>'
p31
sS'__getattribute__'
p32
S"<method-wrapper '__getattribute__' of exceptions.KeyError object>"
p33
sS'__class__'
p34
S"<type 'exceptions.KeyError'>"
p35
sS'__unicode__'
p36
S'<built-in method __unicode__ of exceptions.KeyError object>'
p37
sS'__delattr__'
p38
S"<method-wrapper '__delattr__' of exceptions.KeyError object>"
p39
sS'__subclasshook__'
p40
S'<built-in method __subclasshook__ of type object>'
p41
sS'__repr__'
p42
S"<method-wrapper '__repr__' of exceptions.KeyError object>"
p43
sS'__dict__'
p44
S'{}'
p45
sS'__sizeof__'
p46
S'<built-in method __sizeof__ of exceptions.KeyError object>'
p47
sS'__doc__'
p48
S"'Mapping key not found.'"
p49
sS'__init__'
p50
S"<method-wrapper '__init__' of exceptions.KeyError object>"
p51
sS'__new__'
p52
S'<built-in method __new__ of type object>'
p53
ssS'evalue'
p54
S"'disposalcode'"
p55
sS'request'
p56
cgluon.html
XML_unpickle
p57
(S's\x8e]\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">ajax</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">application</td><td style="vertical-align:top;">:</td><td><div>chemwastepro</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">args</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>5</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cid</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">controller</td><td style="vertical-align:top;">:</td><td><div>inventory</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_admin</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-978e3300-ef3c-4d4c-9389-11fa943f7b64<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_chemwastepro</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_welcome</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-ba5a0d1a-6fa2-4839-9620-ad6f1d18c5b3<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">env</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_ENCODING</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, sdch, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_LANGUAGE</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8,ms;q=0.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONNECTION</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_COOKIE</td><td style="vertical-align:top;">:</td><td><div>session_id_welcome=127.0.0.1-ba5a0d1a-6fa2-4839-9620-ad6f1d18c5b3; session_id_admin=127.0.0.1-978e3300-ef3c-4d4c-9389-11fa943f7b64; session_id_chemwastepro=127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_HOST</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_REFERER</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000/chemwastepro/inventory/chemindex</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_UPGRADE_INSECURE_REQUESTS</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_USER_AGENT</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_INFO</td><td style="vertical-align:top;">:</td><td><div>/chemwastepro/inventory/chemindexedit/5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">QUERY_STRING</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_ADDR</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_PORT</td><td style="vertical-align:top;">:</td><td><div>60074</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_METHOD</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_NAME</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_NAME</td><td style="vertical-align:top;">:</td><td><div>M1PDG8WL</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PORT</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PROTOCOL</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SOFTWARE</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/admin/&#x27;, &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/welcome/&#x27;, &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x106d20ef0: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;M1PDG8WL&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_encoding</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, sdch, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_language</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8,ms;q=0.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_connection</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_cookie</td><td style="vertical-align:top;">:</td><td><div>session_id_welcome=127.0.0.1-ba5a0d1a-6fa2-4839-9620-ad6f1d18c5b3; session_id_admin=127.0.0.1-978e3300-ef3c-4d4c-9389-11fa943f7b64; session_id_chemwastepro=127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_host</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_referer</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000/chemwastepro/inventory/chemindex</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_upgrade_insecure_requests</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_user_agent</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>::1</div></td></tr><tr><td><div>M1PDG8WL</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_info</td><td style="vertical-align:top;">:</td><td><div>/chemwastepro/inventory/chemindexedit/5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">query_string</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_addr</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_port</td><td style="vertical-align:top;">:</td><td><div>60074</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_method</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_uri</td><td style="vertical-align:top;">:</td><td><div>/chemwastepro/inventory/chemindexedit/5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_name</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_name</td><td style="vertical-align:top;">:</td><td><div>M1PDG8WL</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_port</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_protocol</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_software</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_path</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x1000ae270&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x1069da328&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x10b164550&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x1000ae270&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x1069da328&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x10b164550&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">extension</td><td style="vertical-align:top;">:</td><td><div>html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">folder</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">function</td><td style="vertical-align:top;">:</td><td><div>chemindexedit</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">global_settings</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/admin/&#x27;, &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/welcome/&#x27;, &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x106d20ef0: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;M1PDG8WL&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>::1</div></td></tr><tr><td><div>M1PDG8WL</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_https</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_local</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_restful</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_scheduler</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_shell</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">now</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2017, 3, 25, 15, 30, 46, 696621)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_args</td><td style="vertical-align:top;">:</td><td><div>5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_extension</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">url</td><td style="vertical-align:top;">:</td><td><div>/chemwastepro/inventory/chemindexedit/5</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">utcnow</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2017, 3, 25, 22, 30, 46, 696630)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi</td><td style="vertical-align:top;">:</td><td><div>&lt;gluon.main.LazyWSGI object at 0x10d922410&gt;</div></td></tr></table></div>'
tRp58
sS'frames'
p59
(lp60
(dp61
S'file'
p62
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/restricted.py'
p63
sS'dump'
p64
(dp65
sS'lnum'
p66
I227
sS'lines'
p67
(dp68
I224
S'            ccode = code'
p69
sI225
S'        else:'
p70
sI226
S'            ccode = compile2(code, layer)'
p71
sI227
S'        exec ccode in environment'
p72
sI228
S'    except HTTP:'
p73
sI229
S'        raise'
p74
sI230
S'    except RestrictedError:'
p75
sI231
S'        # do not encapsulate (obfuscate) the original RestrictedError'
p76
sI222
S'    try:'
p77
sI223
S'        if isinstance(code, types.CodeType):'
p78
ssS'call'
p79
S"(code='# -*- coding: utf-8 -*-\\n# try something like\\nfro...\\n\\nresponse._vars=response._caller(chemindexedit)\\n', environment={'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}, layer='/Users/byoung/Desktop/web2py/web2py.app/Contents...pplications/chemwastepro/controllers/inventory.py')"
p80
sS'func'
p81
S'restricted'
p82
sa(dp83
g62
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/controllers/inventory.py'
p84
sg64
(dp85
sg66
I282
sg67
(dp86
I271
S'        #user alert of change'
p87
sI272
S'        responsestr = "No shelf found"'
p88
sI273
S'        #javascript making change'
p89
sI274
S'        response.js = "var element = document.getElementById(\'item_shelf\');element.value = 0;"'
p90
sI275
S'    else:'
p91
sI276
S'        #user alert of change'
p92
sI277
S'        responsestr = "Item shelved"'
p93
sI278
S'        #javascript making change'
p94
sI279
S'        response.js =  ("var element = document.getElementById(\'item_shelf\');element.value = %s;" % row.id)'
p95
sI280
S'    return (responsestr)'
p96
ssg79
S'()'
p97
sg81
S'<module>'
p98
sa(dp99
g62
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/globals.py'
p100
sg64
(dp101
sg66
I417
sg67
(dp102
I416
S'        self._vars = None'
p103
sI417
S'        self._caller = lambda f: f()'
p104
sI418
S'        self._view_environment = None'
p105
sI419
S'        self._custom_commit = None'
p106
sI420
S'        self._custom_rollback = None'
p107
sI421
S"        self.generic_patterns = ['*']"
p108
sI412
S"        self.flash = ''            # used by the default view layout"
p109
sI413
S'        self.meta = Storage()      # used by web2py_ajax.html'
p110
sI414
S'        self.menu = []             # used by the default view layout'
p111
sI415
S'        self.files = []            # used by web2py_ajax.html'
p112
ssg79
S'(f=<function chemindexedit>)'
p113
sg81
S'<lambda>'
p114
sa(dp115
g62
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/controllers/inventory.py'
p116
sg64
(dp117
sg66
I203
sg67
(dp118
I198
S'        #disposalcode = record.Idisposalcode #<<<<TODO Add onchange event'
p119
sI199
S''
sI200
S'        #Add a hidden field hazard_list to return the result of the Chemical Hazard unordered list'
p120
sI201
S'        #Pass value = blank'
p121
sI202
S'        #If hazard_list gets value, it means the sortable list as changed, and associations should be updated'
p122
sI203
S"        form = SQLFORM(db.chemindex, record,fields=fields,hidden=dict(hazard_list=''))"
p123
sI204
S'        #NORMALIZED'
p124
sI205
S'        rows = db(db.chemindex_hazard_association.chemindex_id == record.id).select(orderby=db.chemindex_hazard_association.hazard_order)'
p125
sI206
S'        for row in rows:'
p126
sI207
S"            chemhazardlist += str(LI(row.hazard_id.hazardname, _class='ui-state-default ui-sortable-handle', _id=row.hazard_id))"
p127
ssg79
S'()'
p128
sg81
S'chemindexedit'
p129
sa(dp130
g62
S'/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/sqlhtml.py'
p131
sg64
(dp132
sg66
I1194
sg67
(dp133
I1189
S'        for fieldname in self.fields:'
p134
sI1190
S"            if fieldname.find('.') >= 0:"
p135
sI1191
S'                continue'
p136
sI1192
S''
sI1193
S'            field = (self.table[fieldname] if fieldname in self.table.fields'
p137
sI1194
S'                     else self.extra_fields[fieldname])'
p138
sI1195
S'            comment = None'
p139
sI1196
S''
sI1197
S'            if comments:'
p140
sI1198
S'                comment = col3.get(fieldname, field.comment)'
p141
ssg79
S"(self=<gluon.sqlhtml.SQLFORM object>, table=<Table chemindex (id, chemname, casnum, state, g...otpsn, packtype, comments, components, unna, pg)>, record=<Row {'chemname': 'Carbamodithioic acid, 1,2-eth... 'Inorganic', 'packtype': None, 'dotpsn': False}>, deletable=False, linkto=None, upload=None, fields=['id', 'chemname', 'casnum', 'group_', 'state', 'disposalcode', 'packtype', 'treatment', 'components', 'hazwastecodes', 'comments'], labels=None, col3={}, submit_button='Submit', delete_label='Check to delete', showid=True, readonly=False, comments=True, keepopts=[], ignore_rw=False, record_id=None, formstyle=None, buttons=['submit'], separator=None, extra_fields=[], **attributes={'hidden': {'hazard_list': ''}})"
p142
sg81
g50
sasS'pyver'
p143
S'Python 2.7.3: /Users/byoung/Desktop/web2py/web2py.app/Contents/MacOS/python (prefix: /Users/byoung/Desktop/web2py/web2py.app/Contents/Resources)'
p144
sS'session'
p145
g57
(S's\x1a\x00\x00\x00<div><table></table></div>'
tRp146
sS'etype'
p147
S"<type 'exceptions.KeyError'>"
p148
sS'date'
p149
S'Sat Mar 25 15:30:46 2017'
p150
sS'response'
p151
g57
(S's%#\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">body</td><td style="vertical-align:top;">:</td><td><div>&lt;cStringIO.StringO object at 0x10dcd0308&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_chemwastepro</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div>/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">delimiters</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>{{</div></td></tr><tr><td><div>}}</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">files</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">form_label_separator</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">formstyle</td><td style="vertical-align:top;">:</td><td><div>bootstrap3_inline</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generic_patterns</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>*</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">google_analytics_id</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">headers</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">Content-Security-Policy</td><td style="vertical-align:top;">:</td><td><div>frame-ancestors &#x27;self&#x27;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">X-Frame-Options</td><td style="vertical-align:top;">:</td><td><div>SAMEORIGIN</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">X-Powered-By</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">logo</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">menu</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div><table><tr><td><div>Home</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/default/index</div></td></tr><tr><td><div><table></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Inventory</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>#</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Item</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/inventory/item</div></td></tr></table></div></td></tr><tr><td><div><li class="divider"></li></div></td></tr><tr><td><div><table><tr><td><div>Container</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/inventory/container</div></td></tr></table></div></td></tr><tr><td><div><li class="divider"></li></div></td></tr><tr><td><div><table><tr><td><div>Shipment</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/inventory/shipment</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Chemical Index</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/inventory/chemindex</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Reports</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/chemwastepro/reports/chemindexedit</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">meta</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">author</td><td style="vertical-align:top;">:</td><td><div>Bruce Young &lt;brucedyoung@gmail.com&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">description</td><td style="vertical-align:top;">:</td><td><div>Open Hazardous Waste Management</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generator</td><td style="vertical-align:top;">:</td><td><div>Web2py Web Framework</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">keywords</td><td style="vertical-align:top;">:</td><td><div>web2py, python, framework</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">models_to_run</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>^\\w+\\.py$</div></td></tr><tr><td><div>^inventory/\\w+\\.py$</div></td></tr><tr><td><div>^inventory/chemindexedit/\\w+\\.py$</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">postprocessing</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_compression_level</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_expires</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_data_name</td><td style="vertical-align:top;">:</td><td><div>session_data_chemwastepro</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_file</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/sessions/0bb/126/127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b&#x27;, mode &#x27;rb+&#x27; at 0x10eaa1ed0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_filename</td><td style="vertical-align:top;">:</td><td><div>/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/sessions/127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_hash</td><td style="vertical-align:top;">:</td><td><div>94e6d2144790c97b7e2c4b265e0a6d79</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-01cbcd42-0920-4f73-befe-12de2ffe8d4b</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_name</td><td style="vertical-align:top;">:</td><td><div>session_id_chemwastepro</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_locked</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_masterapp</td><td style="vertical-align:top;">:</td><td><div>chemwastepro</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_new</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_storage_type</td><td style="vertical-align:top;">:</td><td><div>file</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">status</td><td style="vertical-align:top;">:</td><td><div>200</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">subtitle</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">title</td><td style="vertical-align:top;">:</td><td><div>Chemwastepro</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">view</td><td style="vertical-align:top;">:</td><td><div>inventory/chemindexedit.html</div></td></tr></table></div>'
tRp152
sS'locals'
p153
(dp154
S'comment'
p155
S"''"
p156
sS'showid'
p157
S'True'
p158
sS'sep'
p159
S"''"
p160
sS'labels'
p161
S'None'
p162
sS'inp'
p163
S'<gluon.html.SELECT object>'
p164
sS'delete_label'
p165
S"'Check to delete'"
p166
sS'cond'
p167
S'False'
p168
sS'nbsp'
p169
S'<gluon.html.XML object>'
p170
sS'submit_button'
p171
S"'Submit'"
p172
sS'table'
p173
S'<Table chemindex (id, chemname, casnum, state, g...otpsn, packtype, comments, components, unna, pg)>'
p174
sS'formstyle'
p175
S'None'
p176
sS'field_type'
p177
S"'string'"
p178
sS'field'
p179
S'<pydal.objects.Field object>'
p180
sS'extra_fields'
p181
S'[]'
p182
sS'comments'
p183
g158
sS'label'
p184
S'<gluon.html.LABEL object>'
p185
sS'buttons'
p186
S"['submit']"
p187
sS'ignore_rw'
p188
g168
sS'readonly'
p189
g168
sS'record_id'
p190
S'None'
p191
sS'separator'
p192
S'None'
p193
sS'inpval'
p194
S"'Solid'"
p195
sS'xfields'
p196
S"[('chemindex_id__row', <gluon.html.LABEL object>, <gluon.html.SPAN object>, ''), ('chemindex_chemname__row', <gluon.html.LABEL object>, <gluon.html.INPUT object>, ''), ('chemindex_casnum__row', <gluon.html.LABEL object>, <gluon.html.INPUT object>, ''), ('chemindex_group___row', <gluon.html.LABEL object>, <gluon.html.SELECT object>, ''), ('chemindex_state__row', <gluon.html.LABEL object>, <gluon.html.SELECT object>, '')]"
p197
sS'widget'
p198
S'<gluon.html.SPAN object>'
p199
sS'ofields'
p200
S"['id', 'chemname', 'casnum', 'group_', 'state', 'disposalcode', 'packtype', 'treatment', 'components', 'hazwastecodes', 'comments']"
p201
sS'field_id'
p202
S"'chemindex_state'"
p203
sS'col3'
p204
g45
sS'deletable'
p205
g168
sS'linkto'
p206
S'None'
p207
sS'default'
p208
S"'Solid'"
p209
sS'fields'
p210
S"['id', 'chemname', 'casnum', 'group_', 'state', 'disposalcode', 'packtype', 'treatment', 'components', 'hazwastecodes', 'comments']"
p211
sS'upload'
p212
S'None'
p213
sS'keyed'
p214
g168
sS'record'
p215
S"<Row {'chemname': 'Carbamodithioic acid, 1,2-eth... 'Inorganic', 'packtype': None, 'dotpsn': False}>"
p216
sS'fieldname'
p217
S"'disposalcode'"
p218
sS'keepopts'
p219
S'[]'
p220
sS'v'
S'5L'
p221
sS'attributes'
p222
S"{'hidden': {'hazard_list': ''}}"
p223
sS'row_id'
p224
S"'chemindex_state__row'"
p225
sS'dspval'
p226
S"'Solid'"
p227
sS'self'
p228
S'<gluon.sqlhtml.SQLFORM object>'
p229
sS'T'
S'<gluon.languages.translator object>'
p230
sssS'traceback'
p231
S'Traceback (most recent call last):\n  File "/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/restricted.py", line 227, in restricted\n  File "/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/controllers/inventory.py", line 282, in <module>\n  File "/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/globals.py", line 417, in <lambda>\n  File "/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/applications/chemwastepro/controllers/inventory.py", line 203, in chemindexedit\n  File "/Users/byoung/Desktop/web2py/web2py.app/Contents/Resources/gluon/sqlhtml.py", line 1194, in __init__\nKeyError: \'disposalcode\'\n'
p232
s.